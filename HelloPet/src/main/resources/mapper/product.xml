<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <!-- 
 	날짜 : 2023/03/23
 	이름 : 장인화
 	내용 : HelloPet product 페이지 기능구현
  -->
<mapper namespace="kr.co.hellopet.dao.ProductDAO">
	
	<select id="Cate1" resultType="kr.co.hellopet.vo.Cate1VO">
		SELECT * FROM `product_cate1`;
	</select>
	
	<select id="Cate2" resultType="kr.co.hellopet.vo.Cate2VO">
		SELECT * FROM `product_cate2`;
	</select>
	
	<select id="SelectCate2" resultType="kr.co.hellopet.vo.Cate2VO">
		SELECT * FROM `product_cate2` WHERE `cate1` = #{cate1}; 
	</select>
	
	<select id="SelectProduct" resultType="kr.co.hellopet.vo.ProductVO">
		SELECT * FROM `product` WHERE `prodCate1`=#{cate1} AND `prodCate2` =#{cate2} limit #{start}, 9;
	</select>
	
	<select id="SelectProductType" resultType="kr.co.hellopet.vo.ProductVO">
		SELECT * FROM `product` WHERE `prodCate1`=#{cate1} AND `prodCate2` =#{cate2} AND `group` =#{type} limit #{start}, 9;
	</select>
	
	<select id="SelectCountTotal" resultType="int" parameterType="map">
		Select Count(`prodNo`) FROM `product` where `prodCate1` =#{cate1} and `prodCate2` =#{cate2};  	
	</select>
	
	<select id="SelectCountTotalType" resultType="int" parameterType="map">
		Select Count(`prodNo`) FROM `product` where `prodCate1` =#{cate1} and  `prodCate2` =#{cate2} and `group` =#{type};  	
	</select>
	
	
	<select id="SelectProductView" resultType="kr.co.hellopet.vo.ProductVO">
		Select * From `product` as a
			JOIN `product_cate1` AS b
			ON a.prodCate1 = b.cate1
 			JOIN `product_cate2` as c
 			ON a.prodCate2 = c.cate2
			WHERE c.cate1=#{cate1} AND c.cate2 =#{cate2}  and `prodNo` =#{prodNo};
	</select>
	
	<select id="SelectProductMap" resultType="kr.co.hellopet.vo.MedicalVO">
		SELECT a.* FROM `pet_hospital_pharmacy` AS a
			JOIN `product` AS b
			ON a.medicalName = b.medicalName
			WHERE b.prodNo =#{prodNo};
	</select>
	
</mapper>